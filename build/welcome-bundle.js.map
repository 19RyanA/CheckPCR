{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/util.ts","webpack:///./src/dates.ts","webpack:///./src/cookies.ts","webpack:///./src/pcr.ts","webpack:///./src/state.ts","webpack:///./src/components/calendar.ts","webpack:///./src/display.ts","webpack:///./src/components/snackbar.ts","webpack:///./src/plugins/done.ts","webpack:///./src/components/resizer.ts","webpack:///./src/plugins/modifiedAssignments.ts","webpack:///./src/plugins/customAssignments.ts","webpack:///./src/components/assignment.ts","webpack:///./src/components/activity.ts","webpack:///./src/plugins/activity.ts","webpack:///./src/app.ts","webpack:///./src/components/errorDisplay.ts","webpack:///./src/plugins/athena.ts","webpack:///./src/components/avatar.ts","webpack:///./src/welcome.ts"],"names":[],"mappings":"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","file":"welcome-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","import { fromDateNum, toDateNum } from './dates'\n\n// @ts-ignore TODO: Make this less hacky\nNodeList.prototype.forEach = HTMLCollection.prototype.forEach = Array.prototype.forEach\n\n/**\n * Forces a layout on an element\n */\nexport function forceLayout(el: HTMLElement): void {\n    // This involves a little trickery in that by requesting the computed height of the element the\n    // browser is forced to do a full layout\n\n    // tslint:disable-next-line no-unused-expression\n    el.offsetHeight\n}\n\n/**\n * Return a string with the first letter capitalized\n */\nexport function capitalizeString(str: string): string {\n    return str.charAt(0).toUpperCase() + str.substr(1)\n}\n\n/**\n * Returns an XMLHttpRequest with the specified url, response type, headers, and data\n */\nfunction constructXMLHttpRequest(url: string, respType?: XMLHttpRequestResponseType|null,\n                                 headers?: {[name: string]: string}|null, data?: string|null): XMLHttpRequest {\n    const req = new XMLHttpRequest()\n\n    // If POST data is provided send a POST request, otherwise send a GET request\n    req.open((data ? 'POST' : 'GET'), url, true)\n\n    if (respType) req.responseType = respType\n\n    if (headers) {\n        Object.keys(headers).forEach((header) => {\n            req.setRequestHeader(header, headers[header])\n        })\n    }\n\n    // If data is undefined default to the normal req.send(), otherwise pass the data in\n    req.send(data)\n    return req\n}\n\n/** Sends a request to a server and returns a Promise.\n * @param url the url to retrieve\n * @param respType the type of response that should be received\n * @param headers the headers that will be sent to the server\n * @param data the data that will be sent to the server (only for POST requests)\n * @param progressElement an optional element for the progress bar used to display the status of the request\n */\nexport function send(url: string, respType?: XMLHttpRequestResponseType|null, headers?: {[name: string]: string}|null,\n                     data?: string|null, progress?: HTMLElement|null): Promise<XMLHttpRequest> {\n\n    const req = constructXMLHttpRequest(url, respType, headers, data)\n\n    return new Promise((resolve, reject) => {\n\n        const progressInner = progress ? progress.querySelector('div') : null\n        if (progress && progressInner) {\n            forceLayout(progressInner) // Wait for it to render\n            progress.classList.add('active') // Display the progress bar\n            if (progressInner.classList.contains('determinate')) {\n                progressInner.classList.remove('determinate')\n                progressInner.classList.add('indeterminate')\n            }\n        }\n\n        // Sometimes the browser won't give the total bytes in the response, so use past results or\n        // a default of 170,000 bytes if the browser doesn't provide the number\n        const load = localStorageRead('load', 170000)\n        let computedLoad = 0\n\n        req.addEventListener('load', (evt) => {\n            // Cache the number of bytes loaded so it can be used for better estimates later on\n            localStorageWrite('load', computedLoad)\n            if (progress) progress.classList.remove('active')\n            // Resolve with the request\n            if (req.status === 200) {\n                resolve(req)\n            } else {\n                reject(Error(req.statusText))\n            }\n        })\n\n        req.addEventListener('error', () => {\n            if (progress) progress.classList.remove('active')\n            reject(Error('Network Error'))\n        })\n\n        if (progress && progressInner) {\n            req.addEventListener('progress', (evt) => {\n                // Update the progress bar\n                if (progressInner.classList.contains('indeterminate')) {\n                    progressInner.classList.remove('indeterminate')\n                    progressInner.classList.add('determinate')\n                }\n                computedLoad = evt.loaded\n                progressInner.style.width = ((100 * evt.loaded) / (evt.lengthComputable ? evt.total : load)) + '%'\n            })\n        }\n    })\n}\n\n/**\n * The equivalent of document.getElementById but throws an error if the element is not defined\n */\nexport function elemById(id: string): HTMLElement {\n    const el = document.getElementById(id)\n    if (el == null) throw new Error(`Could not find element with id ${id}`)\n    return el\n}\n\n/**\n * A little helper function to simplify the creation of HTML elements\n */\nexport function element(tag: string, cls: string|string[], html?: string|null, id?: string|null): HTMLElement {\n    const e = document.createElement(tag)\n\n    if (typeof cls === 'string') {\n        e.classList.add(cls)\n    } else {\n        cls.forEach((c) => e.classList.add(c))\n    }\n\n    if (html) e.innerHTML = html\n    if (id) e.setAttribute('id', id)\n\n    return e\n}\n\n/**\n * Throws an error if the supplied argument is null, otherwise returns the argument\n */\nexport function _$<T>(arg: T|null): T {\n    if (arg == null) throw new Error('Expected argument to be non-null')\n    return arg\n}\n\nexport function _$h(arg: Node|EventTarget|null): HTMLElement {\n    if (arg == null) throw new Error('Expected node to be non-null')\n    if (!(arg instanceof HTMLElement)) throw new Error('Node is not an HTML element')\n    return arg\n}\n\n// Because some localStorage entries can become corrupted due to error side effects, the below\n// method tries to read a value from localStorage and handles errors.\nexport function localStorageRead(name: string): any\nexport function localStorageRead<R>(name: string, defaultVal: () => R): R\nexport function localStorageRead<T>(name: string, defaultVal: T): T\nexport function localStorageRead(name: string, defaultVal?: any): any {\n    if (!localStorage.hasOwnProperty(name)) {\n        return typeof defaultVal === 'function' ? defaultVal() : defaultVal\n    }\n    try {\n        return JSON.parse(localStorage.getItem(name) as any)\n    } catch (e) {\n        return typeof defaultVal === 'function' ? defaultVal() : defaultVal\n    }\n}\n\nexport function localStorageWrite(name: string, item: any): void {\n    localStorage.setItem(name, JSON.stringify(item))\n}\n\ninterface IdleDeadline {\n    didTimeout: boolean\n    timeRemaining: () => number\n}\n\n// Because the requestIdleCallback function is very new (as of writing only works with Chrome\n// version 47), the below function polyfills that method.\nexport function requestIdleCallback(cb: (deadline: IdleDeadline) => void, opts: { timeout: number}): number {\n    if ('requestIdleCallback' in window) {\n        return (window as any).requestIdleCallback(cb, opts)\n    }\n    const start = Date.now()\n\n    return setTimeout(() => cb({\n        didTimeout: false,\n        timeRemaining(): number {\n            return Math.max(0, 50 - (Date.now() - start))\n        }\n    }), 1)\n}\n\n/**\n * Determine if the two dates have the same year, month, and day\n */\nfunction datesEqual(a: Date, b: Date): boolean {\n    return toDateNum(a) === toDateNum(b)\n}\n\nconst DATE_RELATIVENAMES: {[name: string]: number} = {\n    'Tomorrow': 1,\n    'Today': 0,\n    'Yesterday': -1,\n    '2 days ago': -2\n}\nconst WEEKDAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\nconst FULLMONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October',\n                    'November', 'December']\n\nexport function dateString(date: Date|number|'Forever', addThis: boolean = false): string {\n    if (date === 'Forever') return date\n    if (typeof date === 'number') return dateString(fromDateNum(date), addThis)\n\n    const relativeMatch = Object.keys(DATE_RELATIVENAMES).find((name) => {\n        const dayAt = new Date()\n        dayAt.setDate(dayAt.getDate() + DATE_RELATIVENAMES[name])\n        return datesEqual(dayAt, date)\n    })\n    if (relativeMatch) return relativeMatch\n\n    const daysAhead = (date.getTime() - Date.now()) / 1000 / 3600 / 24\n\n    // If the date is within 6 days of today, only display the day of the week\n    if (0 < daysAhead && daysAhead <= 6) {\n        return (addThis ? 'This ' : '') + WEEKDAYS[date.getDay()]\n    }\n    return `${WEEKDAYS[date.getDay()]}, ${FULLMONTHS[date.getMonth()]} ${date.getDate()}`\n}\n\nexport function monthString(date: Date|number): string {\n    if (typeof date === 'number') return monthString(fromDateNum(date))\n\n    const today = new Date()\n    if (today.getFullYear() === date.getFullYear()) {\n        if (today.getMonth() === date.getMonth()) return 'This Month'\n        if (today.getMonth() + 1 === date.getMonth()) return 'Next Month'\n        if (today.getMonth() - 1 === date.getMonth()) return 'Last Month'\n        return FULLMONTHS[date.getMonth()]\n    }\n    return FULLMONTHS[date.getMonth()] + ' ' + date.getFullYear()\n}\n\n// The one below scrolls smoothly to a y position.\nexport function smoothScroll(to: number): Promise<void> {\n    return new Promise((resolve, reject) => {\n        let start: number|null = null\n        const from = document.body.scrollTop\n        const amount = to - from\n        const step = (timestamp: number) => {\n            if (start == null) { start = timestamp }\n            const progress = timestamp - start\n            window.scrollTo(0, from + (amount * (progress / 350)))\n            if (progress < 350) {\n                return requestAnimationFrame(step)\n            } else {\n                _$(document.querySelector('nav')).classList.remove('headroom--unpinned')\n                resolve()\n            }\n        }\n        requestAnimationFrame(step)\n    })\n}\n\n// And a function to apply an ink effect\nexport function ripple(el: HTMLElement): void {\n    el.addEventListener('mousedown', (evt) => {\n        if (evt.which !== 1) return // Not left button\n        const wave = element('span', 'wave')\n        const size = Math.max(Number(el.offsetWidth), Number(el.offsetHeight))\n        wave.style.width = (wave.style.height = size + 'px')\n\n        let x = evt.clientX\n        let y = evt.clientY\n        const rect = el.getBoundingClientRect()\n        x -= rect.left\n        y -= rect.top\n\n        wave.style.top = (y - (size / 2)) + 'px'\n        wave.style.left = (x - (size / 2)) + 'px'\n        el.appendChild(wave)\n        wave.setAttribute('data-hold', String(Date.now()))\n        forceLayout(wave)\n        wave.style.transform = 'scale(2.5)'\n    })\n    el.addEventListener('mouseup', (evt) => {\n        if (evt.which !== 1) return // Only for left button\n        const waves = el.getElementsByClassName('wave')\n        waves.forEach((wave) => {\n            const diff = Date.now() - Number(wave.getAttribute('data-hold'))\n            const delay = Math.max(350 - diff, 0)\n            setTimeout(() => {\n                (wave as HTMLElement).style.opacity = '0'\n                setTimeout(() => {\n                    wave.remove()\n                }, 550)\n            }, delay)\n        })\n    })\n}\n\nexport function cssNumber(css: string|null): number {\n    if (!css) return 0\n    return parseInt(css, 10)\n}\n\n// For ease of animations, a function that returns a promise is defined.\nexport function animateEl(el: HTMLElement, keyframes: AnimationKeyFrame[], options: AnimationOptions):\n    Promise<AnimationPlaybackEvent> {\n    return new Promise((resolve, reject) => {\n        const player = el.animate(keyframes, options)\n        player.onfinish = (e) => resolve(e)\n    })\n}\n","export function tzoff(): number {\n    return (new Date()).getTimezoneOffset() * 1000 * 60 // For future calculations\n}\n\nexport function toDateNum(date: Date|number): number {\n    const num = date instanceof Date ? date.getTime() : date\n    return Math.floor((num - tzoff()) / 1000 / 3600 / 24)\n}\n\n// *FromDateNum* converts a number of days to a number of seconds\nexport function fromDateNum(days: number): Date {\n    const d = new Date((days * 1000 * 3600 * 24) + tzoff())\n    // The checks below are to handle daylight savings time\n    if (d.getHours() === 1) { d.setHours(0) }\n    if ((d.getHours() === 22) || (d.getHours() === 23)) {\n      d.setHours(24)\n      d.setMinutes(0)\n      d.setSeconds(0)\n    }\n    return d\n}\n\nexport function today(): number {\n    return toDateNum(new Date())\n}\n\n/**\n * Iterates from the starting date to ending date inclusive\n */\nexport function iterDays(start: Date, end: Date, cb: (date: Date) => void): void {\n    // tslint:disable-next-line no-loops\n    for (const d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\n        cb(d)\n    }\n}\n","\n/**\n * Cookie functions (a cookie is a small text document that the browser can remember)\n */\n\n/**\n * Retrieves a cookie\n * @param cname the name of the cookie to retrieve\n */\nexport function getCookie(cname: string): string {\n    const name = cname + '='\n    const cookiePart = document.cookie.split(';').find((c) => c.includes(name))\n    if (cookiePart) return cookiePart.trim().substring(name.length)\n    return '' // Blank if cookie not found\n  }\n\n/** Sets the value of a cookie\n * @param cname the name of the cookie to set\n * @param cvalue the value to set the cookie to\n * @param exdays the number of days that the cookie will expire in (and not be existent anymore)\n */\nexport function setCookie(cname: string, cvalue: string, exdays: number): void {\n    const d = new Date()\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000))\n    const expires = `expires=${d.toUTCString()}`\n    document.cookie = cname + '=' + cvalue + '; ' + expires\n  }\n\n/**\n * Delets a cookie\n * @param cname the name of the cookie to delete\n */\nexport function deleteCookie(cname: string): void {\n    // This is like *setCookie*, but sets the expiry date to something in the past so the cookie is deleted.\n    document.cookie = cname + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;'\n}\n","/**\n * This module contains code to both fetch and parse assignments from PCR.\n */\nimport { updateAvatar } from './components/avatar'\nimport { displayError } from './components/errorDisplay'\nimport { snackbar } from './components/snackbar'\nimport { deleteCookie, getCookie, setCookie } from './cookies'\nimport { toDateNum } from './dates'\nimport { display, formatUpdate } from './display'\nimport { state, zeroDateOffsets } from './state'\nimport { _$, elemById, localStorageWrite, send } from './util'\n\nconst PCR_URL = 'https://webappsca.pcrsoft.com'\nconst ASSIGNMENTS_URL = `${PCR_URL}/Clue/SC-Assignments-Start-and-End-Date-(No-Range)/18594`\nconst LOGIN_URL = `${PCR_URL}/Clue/SC-Student-Portal-Login-LDAP/8464?returnUrl=${encodeURIComponent(ASSIGNMENTS_URL)}`\nconst ATTACHMENTS_URL = `${PCR_URL}/Clue/Common/AttachmentRender.aspx`\nconst FORM_HEADER_ONLY = { 'Content-type': 'application/x-www-form-urlencoded' }\nconst ONE_MINUTE_MS = 60000\n\nconst progressElement = elemById('progress')\nconst loginDialog = elemById('login')\nconst loginBackground = document.getElementById('loginBackground')\nconst lastUpdateEl = document.getElementById('lastUpdate')\nconst usernameEl = elemById('username') as HTMLInputElement\nconst passwordEl = elemById('password') as HTMLInputElement\nconst rememberCheck = elemById('remember') as HTMLInputElement\nconst incorrectLoginEl = elemById('loginIncorrect')\n\n// TODO keeping these as a global vars is bad\nconst loginHeaders: {[header: string]: string} = {}\nconst viewData: {[hader: string]: string} = {}\n\nexport interface IApplicationData {\n    classes: string[]\n    assignments: IAssignment[]\n    monthView: boolean\n    monthOffset: number\n}\n\nexport interface IAssignment {\n    start: number\n    end: number|'Forever'\n    attachments: AttachmentArray[]\n    body: string\n    type: string\n    baseType: string\n    class: number|null,\n    title: string\n    id: string\n}\n\nexport type AttachmentArray = [string, string]\n\n// This is the function that retrieves your assignments from PCR.\n//\n// First, a request is sent to PCR to load the page you would normally see when accessing PCR.\n//\n// Because this is run as a chrome extension, this page can be accessed. Otherwise, the browser\n// would throw an error for security reasons (you don't want a random website being able to access\n// confidential data from a website you have logged into).\n\n/**\n * Fetches data from PCR and if the user is logged in parses and displays it\n * @param override Whether to force an update even there was one recently\n * @param data  Optional data to be posted to PCR\n */\nexport async function fetch(override: boolean = false, data?: string, onsuccess: () => void = display,\n                            onlogin?: () => void): Promise<void> {\n    if (!override && Date.now() - state.lastTriedUpdate.get() < ONE_MINUTE_MS) return\n    state.lastTriedUpdate.set(Date.now())\n\n    // Request a new month if needed\n    const monthOffset = state.calDateOffset.get()\n    if (monthOffset !== 0) {\n        const today = new Date()\n        today.setMonth(today.getMonth() + state.calDateOffset.get())\n        // Remember months are zero-indexed\n        const dateArray = [today.getFullYear(), today.getMonth() + 1, 1]\n        const newViewData = {\n            ...viewData,\n            __EVENTTARGET: 'ctl00$ctl00$baseContent$baseContent$flashTop$ctl00$RadScheduler1$SelectedDateCalendar',\n            __EVENTARGUMENT: 'd',\n            ctl00_ctl00_baseContent_baseContent_flashTop_ctl00_RadScheduler1_SelectedDateCalendar_SD:\n                JSON.stringify([dateArray]),\n            ctl00_ctl00_baseContent_baseContent_flashTop_ctl00_RadScheduler1_SelectedDateCalendar_AD:\n                JSON.stringify([[1900, 1, 1], [2099, 12, 30], dateArray])\n        }\n        const postArray: string[] = [] // Array of data to post\n        Object.entries(newViewData).forEach(([h, v]) => {\n            postArray.push(encodeURIComponent(h) + '=' + encodeURIComponent(v))\n        })\n        data = (data ? data + '&' : '') + postArray.join('&')\n    }\n\n    const headers = data ? FORM_HEADER_ONLY : undefined\n    console.time('Fetching assignments')\n    try {\n        const resp = await send(ASSIGNMENTS_URL, 'document', headers, data, progressElement)\n        console.timeEnd('Fetching assignments')\n        if (resp.responseURL.indexOf('Login') !== -1) {\n            // We have to log in now\n            (resp.response as HTMLDocument).getElementsByTagName('input').forEach((e) => {\n                loginHeaders[e.name] = e.value || ''\n            })\n            console.log('Need to log in')\n            const up = getCookie('userPass') // Attempts to get the cookie *userPass*, which is set if the\n                                             // \"Remember me\" checkbox is checked when logging in through CheckPCR\n            if (up === '') {\n                if (loginBackground) loginBackground.style.display = 'block'\n                loginDialog.classList.add('active')\n                if (onlogin) onlogin()\n            } else {\n                // Because we were remembered, we can log in immediately without waiting for the\n                // user to log in through the login form\n                dologin(window.atob(up).split(':') as [string, string], false, onsuccess)\n            }\n        } else {\n            // Logged in now\n            console.log('Fetching assignments successful')\n            state.lastUpdate.set(Date.now())\n            if (lastUpdateEl) lastUpdateEl.innerHTML = formatUpdate(state.lastUpdate.get())\n            try {\n                parse(resp.response, monthOffset)\n                onsuccess()\n                if (monthOffset === 0) {\n                    state.data.forceUpdate()\n                }\n            } catch (error) {\n                console.log(error)\n                displayError(error)\n            }\n        }\n    } catch (error) {\n        console.log('Could not fetch assignments; You are probably offline. Here\\'s the error:', error)\n        snackbar('Could not fetch your assignments', 'Retry', () => fetch(true))\n    }\n}\n\n/**\n * Logs the user into PCR\n * @param val   An optional length-2 array of the form [username, password] to use the user in with.\n *              If this array is not given the login dialog inputs will be used.\n * @param submitEvt Whether to override the username and password suppleid in val with the values of the input elements\n */\nexport async function dologin(val?: [string, string]|null, submitEvt: boolean = false,\n                              onsuccess: () => void = display): Promise<void> {\n    loginDialog.classList.remove('active')\n    setTimeout(() => {\n        if (loginBackground) loginBackground.style.display = 'none'\n    }, 350)\n\n    const postArray: string[] = [] // Array of data to post\n    localStorageWrite('username', val && !submitEvt ? val[0] : usernameEl.value)\n    updateAvatar()\n    Object.keys(loginHeaders).forEach((h) =>  {\n        // Loop through the input elements contained in the login page. As mentioned before, they\n        // will be sent to PCR to log in.\n        if (h.toLowerCase().indexOf('user') !== -1) {\n            loginHeaders[h] = val && !submitEvt ? val[0] : usernameEl.value\n        }\n        if (h.toLowerCase().indexOf('pass') !== -1) {\n            loginHeaders[h] = val && !submitEvt ? val[1] : passwordEl.value\n        }\n        postArray.push(encodeURIComponent(h) + '=' + encodeURIComponent(loginHeaders[h]))\n    })\n\n    // Now send the login request to PCR\n    console.time('Logging in')\n    try {\n        const resp = await send(LOGIN_URL, 'document', FORM_HEADER_ONLY, postArray.join('&'), progressElement)\n        console.timeEnd('Logging in')\n        if (resp.responseURL.indexOf('Login') !== -1) {\n        // If PCR still wants us to log in, then the username or password entered were incorrect.\n            incorrectLoginEl.style.display = 'block'\n            passwordEl.value = ''\n\n            loginDialog.classList.add('active')\n            if (loginBackground) loginBackground.style.display = 'block'\n        } else {\n            // Otherwise, we are logged in\n            if (rememberCheck.checked) { // Is the \"remember me\" checkbox checked?\n                // Set a cookie with the username and password so we can log in automatically in the\n                // future without having to prompt for a username and password again\n                setCookie('userPass', window.btoa(usernameEl.value + ':' + passwordEl.value), 14)\n            }\n            // loadingBar.style.display = \"none\"\n            state.lastUpdate.set(Date.now())\n            if (lastUpdateEl) lastUpdateEl.innerHTML = formatUpdate(state.lastUpdate.get())\n            try {\n                parse(resp.response, 0) // Parse the data PCR has replied with\n                onsuccess()\n                state.data.forceUpdate() // Store for offline use\n            } catch (e) {\n                console.log(e)\n                displayError(e)\n            }\n        }\n    } catch (error) {\n         console.log('Could not log in to PCR. Either your network connection was lost during your visit ' +\n                     'or PCR is just not working. Here\\'s the error:', error)\n    }\n}\n\nexport function getClasses(): string[] {\n    const data = state.data.get()\n    if (!data) return []\n    return data.classes\n}\n\n// In PCR's interface, you can click a date in month or week view to see it in day view.\n// Therefore, the HTML element that shows the date that you can click on has a hyperlink that looks like `#2015-04-26`.\n// The function below will parse that String and return a Date timestamp\nfunction parseDateHash(element: HTMLAnchorElement): number {\n    const [year, month, day] = element.hash.substring(1).split('-').map(Number)\n    return (new Date(year, month - 1, day)).getTime()\n}\n\n// The *attachmentify* function parses the body of an assignment (*text*) and returns the assignment's attachments.\n// Side effect: these attachments are removed\nfunction attachmentify(element: HTMLElement): AttachmentArray[] {\n    const attachments: AttachmentArray[] = []\n\n    // Get all links\n    const as = Array.from(element.getElementsByTagName('a'))\n    as.forEach((a) => {\n        if (a.id.includes('Attachment')) {\n            attachments.push([\n                a.innerHTML,\n                a.search + a.hash\n            ])\n            a.remove()\n        }\n    })\n    return attachments\n}\n\nconst URL_REGEX = new RegExp(`(\\\nhttps?:\\\\/\\\\/\\\n[-A-Z0-9+&@#\\\\/%?=~_|!:,.;]*\\\n[-A-Z0-9+&@#\\\\/%=~_|]+\\\n)`, 'ig'\n)\n\n// This function replaces text that represents a hyperlink with a functional hyperlink by using\n// javascript's replace function with a regular expression if the text already isn't part of a\n// hyperlink.\nfunction urlify(text: string): string {\n    return text.replace(URL_REGEX, (str, str2, offset) => { // Function to replace matches\n        if (/href\\s*=\\s*./.test(text.substring(offset - 10, offset)) ||\n            /originalpath\\s*=\\s*./.test(text.substring(offset - 20, offset))\n        ) {\n            return str\n        } else {\n            return `<a href=\"${str}\">${str}</a>`\n        }\n    })\n}\n\n// Also, PCR\"s interface uses a system of IDs to identify different elements. For example, the ID of\n// one of the boxes showing the name of an assignment could be\n// `ctl00_ctl00_baseContent_baseContent_flashTop_ctl00_RadScheduler1_95_0`. The function below will\n// return the first HTML element whose ID contains a specified String (*id*) and containing a\n// specified tag (*tag*).\nfunction findId(element: HTMLElement|HTMLDocument, tag: string, id: string): HTMLElement {\n    const el = [...element.getElementsByTagName(tag)].find((e) => e.id.includes(id))\n    if (!el) throw new Error(`Could not find element with tag ${tag} and id ${id} in ${element}`)\n    return el as HTMLElement\n}\n\nfunction parseAssignmentType(type: string): string {\n    return type.toLowerCase().replace('& quizzes', '').replace('tests', 'test')\n}\n\nfunction parseAssignmentBaseType(type: string): string {\n    return type.toLowerCase().replace('& quizzes', '').replace(/\\s/g, '').replace('quizzes', 'test')\n}\n\nfunction parseAssignment(ca: HTMLElement): IAssignment {\n    const data = state.data.get()\n    if (!data) throw new Error('Data dictionary not set up')\n\n    // The starting date and ending date of the assignment are parsed first\n    const range = findId(ca, 'span', 'StartingOn').innerHTML.split(' - ')\n    const assignmentStart = toDateNum(Date.parse(range[0]))\n    const assignmentEnd = (range[1] != null) ? toDateNum(Date.parse(range[1])) : assignmentStart\n\n    // Then, the name of the assignment is parsed\n    const t = findId(ca, 'span', 'lblTitle')\n    let title = t.innerHTML\n\n    // The actual body of the assignment and its attachments are parsed next\n    const b = _$(_$(t.parentNode).parentNode) as HTMLElement\n    [...b.getElementsByTagName('div')].slice(0, 2).forEach((div) => div.remove())\n\n    const ap = attachmentify(b) // Separates attachments from the body\n\n    // The last Replace removes leading and trailing newlines\n    const assignmentBody = urlify(b.innerHTML)\n                               .replace(/^(?:\\s*<br\\s*\\/?>)*/, '')\n                               .replace(/(?:\\s*<br\\s*\\/?>)*\\s*$/, '').trim()\n\n    // Finally, we separate the class name and type (homework, classwork, or projects) from the title of the assignment\n    const matchedTitle = title.match(/\\(([^)]*\\)*)\\)$/)\n    if ((matchedTitle == null)) {\n        throw new Error(`Could not parse assignment title \\\"${title}\\\"`)\n    }\n    const assignmentType = matchedTitle[1]\n    const assignmentBaseType = parseAssignmentBaseType(ca.title.substring(0, ca.title.indexOf('\\n')))\n    let assignmentClassIndex = null\n    data.classes.some((c, pos) => {\n        if (title.indexOf(c) !== -1) {\n            assignmentClassIndex = pos\n            title = title.replace(c, '')\n            return true\n        }\n        return false\n    })\n\n    if (assignmentClassIndex === null || assignmentClassIndex === -1) {\n        throw new Error(`Could not find class in title ${title} (classes are ${data.classes}`)\n    }\n\n    const assignmentTitle = title.substring(title.indexOf(': ') + 2).replace(/\\([^\\(\\)]*\\)$/, '').trim()\n\n    // To make sure there are no repeats, the title of the assignment (only letters) and its start &\n    // end date are combined to give it a unique identifier.\n    const assignmentId = assignmentTitle.replace(/[^\\w]*/g, '') + (assignmentStart + assignmentEnd)\n\n    return {\n        start: assignmentStart,\n        end: assignmentEnd,\n        attachments: ap,\n        body: assignmentBody,\n        type: assignmentType,\n        baseType: assignmentBaseType,\n        class: assignmentClassIndex,\n        title: assignmentTitle,\n        id: assignmentId\n    }\n}\n\n// The function below will parse the data given by PCR and convert it into an object. If you open up\n// the developer console on CheckPCR and type in `data`, you can see the array containing all of\n// your assignments.\nfunction parse(doc: HTMLDocument, monthOffset: number): void {\n    console.time('Handling data') // To time how long it takes to parse the assignments\n    const handledDataShort: string[] = [] // Array used to make sure we don\"t parse the same assignment twice.\n    const data: IApplicationData = {\n        classes: [],\n        assignments: [],\n        monthView: (_$(doc.querySelector('.rsHeaderMonth')).parentNode as HTMLElement).classList.contains('rsSelected'),\n        monthOffset\n    } // Reset the array in which all of your assignments are stored in.\n    state.data.localSet(data)\n\n    doc.querySelectorAll('input:not([type=\"submit\"])').forEach((e) => {\n        viewData[(e as HTMLInputElement).name] = (e as HTMLInputElement).value || ''\n    })\n\n    // Now, the classes you take are parsed (these are the checkboxes you see up top when looking at PCR).\n    const classes = findId(doc, 'table', 'cbClasses').getElementsByTagName('label')\n    classes.forEach((c) => {\n        data.classes.push(c.innerHTML)\n    })\n\n    const assignments = doc.getElementsByClassName('rsApt rsAptSimple')\n    Array.prototype.forEach.call(assignments, (assignmentEl: HTMLElement) => {\n        const assignment = parseAssignment(assignmentEl)\n        if (handledDataShort.indexOf(assignment.id) === -1) { // Make sure we haven't already parsed the assignment\n            handledDataShort.push(assignment.id)\n            data.assignments.push(assignment)\n        }\n    })\n\n    console.timeEnd('Handling data')\n\n    // Now allow the view to be switched\n    document.body.classList.add('loaded')\n}\n\nexport function urlForAttachment(search: string): string {\n    return ATTACHMENTS_URL + search\n}\n\nexport function getAttachmentMimeType(search: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const req = new XMLHttpRequest()\n        req.open('HEAD', urlForAttachment(search))\n        req.onload = () => {\n            if (req.status === 200) {\n                const type = req.getResponseHeader('Content-Type')\n                if (type) {\n                    resolve(type)\n                } else {\n                    reject(new Error('Content type is null'))\n                }\n            }\n        }\n        req.send()\n    })\n}\n\nexport function classById(id: number|null|undefined): string {\n    return (id ? getClasses()[id] : null) || 'Unknown class'\n}\n\nexport function switchViews(): void {\n    if (Object.keys(viewData).length > 0) {\n        elemById('sideBackground').click()\n        const newViewData = {\n            ...viewData,\n            __EVENTTARGET: 'ctl00$ctl00$baseContent$baseContent$flashTop$ctl00$RadScheduler1',\n            __EVENTARGUMENT: JSON.stringify({\n                Command: `SwitchTo${document.body.getAttribute('data-pcrview') === 'month' ? 'Week' : 'Month'}View`\n            }),\n            ctl00_ctl00_baseContent_baseContent_flashTop_ctl00_RadScheduler1_ClientState:\n                JSON.stringify({scrollTop: 0, scrollLeft: 0, isDirty: false}),\n            ctl00_ctl00_RadScriptManager1_TSM: ';;System.Web.Extensions, Version=4.0.0.0, Culture=neutral, ' +\n                'PublicKeyToken=31bf3856ad364e35:en-US:d28568d3-e53e-4706-928f-3765912b66ca:ea597d4b:b25378d2'\n        }\n        const postArray: string[] = [] // Array of data to post\n        Object.entries(newViewData).forEach(([h, v]) => {\n            postArray.push(encodeURIComponent(h) + '=' + encodeURIComponent(v))\n        })\n        zeroDateOffsets()\n        fetch(true, postArray.join('&'))\n    }\n}\n\nexport function logout(): void {\n    if (Object.keys(viewData).length > 0) {\n        deleteCookie('userPass')\n        elemById('sideBackground').click()\n        viewData.__EVENTTARGET = 'ctl00$ctl00$baseContent$LogoutControl1$LoginStatus1$ctl00'\n        viewData.__EVENTARGUMENT = ''\n        viewData.ctl00_ctl00_baseContent_baseContent_flashTop_ctl00_RadScheduler1_ClientState =\n            JSON.stringify({scrollTop: 0, scrollLeft: 0, isDirty: false})\n        const postArray: string[] = [] // Array of data to post\n        Object.entries(viewData).forEach(([h, v]) => {\n            postArray.push(encodeURIComponent(h) + '=' + encodeURIComponent(v))\n        })\n        fetch(true, postArray.join('&'))\n      }\n}\n","import { IApplicationData } from './pcr'\nimport { ActivityItem } from './plugins/activity'\nimport { IAthenaData } from './plugins/athena'\nimport { ICustomAssignment } from './plugins/customAssignments'\nimport { IModifiedBodies } from './plugins/modifiedAssignments'\nimport { localStorageRead, localStorageWrite } from './util'\n\n/**\n * In rewriting Check PCR, I've decided to consolidate all settings and view\n * parameters into a single store. Think Redux or Vuex (though way fewer\n * features). Hopefully this will make it easier to debug as I can more easily\n * reproduce states, and I may be able to implement some kind of settings sync\n * easier.\n *\n * The architecture of this is as follows:\n *\n * Each state item is a member of the IStateItem interface. These interfaces can\n * be returned by composing multiple functions, each giving the state item\n * special properties. For example, It can be saved in local storage and syned\n * between sessions.\n */\n\ninterface IStateItem<V> {\n    get(): V\n    set(value: V): void\n}\n\ninterface IBackedStateItem<V> extends IStateItem<V> {\n    /** Set a value without updating the store */\n    localSet(value: V): void,\n    /** Refreshes state from backed store */\n    revert(): void,\n    /** Forces a write of the state back to the store */\n    forceUpdate(): void,\n}\n\nclass CachedState<V> implements IStateItem<V> {\n    constructor(private value: V) {}\n    public set(value: V): void { this.value = value }\n    public get(): V { return this.value }\n}\n\n/**\n * Back a given state to localStorage\n */\nfunction storedState<V>(name: string, statevar: IStateItem<V>): IBackedStateItem<V> {\n    statevar.set(localStorageRead(name, () => statevar.get()))\n    return {\n        get(): V { return statevar.get() },\n        set(value: V): void {\n            localStorageWrite(name, value)\n            return statevar.set(value)\n        },\n        localSet(value: V): void {\n            return statevar.set(value)\n        },\n        revert(): void {\n            statevar.set(localStorageRead(name, () => statevar.get()))\n        },\n        forceUpdate(): void {\n            localStorageWrite(name, statevar.get())\n        }\n    }\n}\n\n// Definitions for various types\ntype AssignmentSpan = 'multiple' | 'start' | 'end'\ntype HideAssignments = 'day' | 'ms' | 'us'\ntype ColorType = 'assignment' | 'class'\ninterface IShownActivity {\n    add: boolean\n    edit: boolean\n    delete: boolean\n}\n\nexport const state = {\n\n    /** Offset from today of the date displayed in list view */\n    listDateOffset: new CachedState(0),\n\n    /** Offset from today of the month displayed in calendar view */\n    calDateOffset: new CachedState(0),\n\n    /** Data fetched from PCR */\n    data: storedState('data', new CachedState<IApplicationData|undefined>(undefined)),\n\n    /** The last time an update was attempted from PCR (irregardless of success) */\n    lastTriedUpdate: new CachedState(0),\n\n    /** The last time data was succesfully fetched from PCR */\n    lastUpdate: storedState('lastUpdate', new CachedState(0)),\n\n    /** Recorded changes to assignments */\n    activity: storedState('activity', new CachedState<ActivityItem[]>([])),\n\n    /** Data on classes */\n    athenaData: storedState('athenaData', new CachedState<IAthenaData|null>(null)),\n\n    /** Assignments marked as done */\n    done: storedState('done', new CachedState<string[]>([])),\n\n    /** Modifications made to assignments */\n    modified: storedState('modified', new CachedState<IModifiedBodies>({})),\n\n    /** The last fetched commit to the news gist */\n    lastNewsCommit: storedState('newsCommit', new CachedState<string|null>(null)),\n\n    /** The detected url to the news gist */\n    newsUrl: new CachedState<string|null>(null),\n\n    /** Custom assignments */\n    extra: storedState('extra', new CachedState<ICustomAssignment[]>([])),\n\n    //////////////////////////////////\n    //           Settings           //\n    //////////////////////////////////\n\n    /**\n     * Minutes between each automatic refresh of the page. Negative numbers indicate no automatic\n     * refreshing.\n     */\n    refreshRate: storedState('refreshRate', new CachedState(-1)),\n\n    /**\n     * Whether the window should refresh assignment data when focussed\n     */\n    refreshOnFocus: storedState('refreshOnFocus', new CachedState(true)),\n\n    /**\n     * Whether switching between views should be animated\n     */\n    viewTrans: storedState('viewTrans', new CachedState(true)),\n\n    /**\n     * Number of days early to show tests in list view\n     */\n    earlyTest: storedState('earlyTest', new CachedState<number>(1)),\n\n    /**\n     * Whether to take tasks off the calendar view and show them in the info pane\n     */\n    sepTasks: storedState('sepTasks', new CachedState<boolean>(false)),\n\n    /**\n     * Whether tasks should have their own color\n     */\n    sepTaskClass: storedState('sepTaskClass', new CachedState<boolean>(false)),\n\n    /**\n     * Whether projects show up in the test page\n     */\n    projectsInTestPane: storedState('projectsInTestPane', new CachedState<boolean>(false)),\n\n    /**\n     * When assignments should be shown on calendar view\n     */\n    assignmentSpan: storedState('assignmentSpan', new CachedState<AssignmentSpan>('multiple')),\n\n    /**\n     * When assignments should disappear from list view\n     */\n    hideAssignments: storedState('hideAssignments', new CachedState<HideAssignments>('day')),\n\n    /**\n     * Whether to use holiday theming\n     */\n    holidayThemes: storedState('holidayThemes', new CachedState<boolean>(false)),\n\n    /**\n     * Whether to color assignments based on their type or class\n     */\n    colorType: storedState('colorType', new CachedState<ColorType>('assignment')),\n\n    /**\n     * Which types of activity are shown in the activity pane\n     */\n    shownActivity: storedState('shownActivity', new CachedState<IShownActivity>({\n      add: true,\n        edit: true,\n        delete: true\n    })),\n\n    /**\n     * Whether to display tasks in the task pane that are completed\n     */\n    showDoneTasks: storedState('showDoneTasks', new CachedState<boolean>(false))\n}\n\nexport function getStateItem(name: string): IStateItem<any> {\n    if (!state.hasOwnProperty(name)) throw new Error(`Invalid state property ${name}`)\n    // @ts-ignore\n    return state[name]\n}\n\n/////////////////////////////////////////\n//           Generic helpers           //\n/////////////////////////////////////////\n\nexport function incrementState(statevar: IStateItem<number>): void {\n    statevar.set(statevar.get() + 1)\n}\n\nexport function decrementState(statevar: IStateItem<number>): void {\n    statevar.set(statevar.get() - 1)\n}\n\n//////////////////////////////////////////\n//           Specific helpers           //\n//////////////////////////////////////////\n\nexport function zeroDateOffsets(): void {\n    state.listDateOffset.set(0)\n    state.calDateOffset.set(0)\n}\n","import { today } from '../dates'\nimport { element } from '../util'\n\nconst MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n\nexport function createWeek(id: string): HTMLElement {\n    const wk = element('section', 'week', null, id)\n    const dayTable = element('table', 'dayTable') as HTMLTableElement\n    const tr = dayTable.insertRow()\n    // tslint:disable-next-line no-loops\n    for (let day = 0; day < 7; day++) tr.insertCell()\n    wk.appendChild(dayTable)\n\n    return wk\n}\n\nexport function createDay(d: Date): HTMLElement {\n    const day = element('div', 'day', null, 'day')\n    day.setAttribute('data-date', String(d.getTime()))\n    if (Math.floor((d.getTime() - d.getTimezoneOffset()) / 1000 / 3600 / 24) === today()) {\n      day.classList.add('today')\n    }\n\n    const month = element('span', 'month', MONTHS[d.getMonth()])\n    day.appendChild(month)\n\n    const date = element('span', 'date', String(d.getDate()))\n    day.appendChild(date)\n\n    return day\n}\n","import { computeWeekId, createAssignment, getES, separatedClass } from './components/assignment'\nimport { createDay, createWeek } from './components/calendar'\nimport { displayError } from './components/errorDisplay'\nimport { resize } from './components/resizer'\nimport { fromDateNum, iterDays, today } from './dates'\nimport { classById, IApplicationData, IAssignment } from './pcr'\nimport { addActivity, saveActivity } from './plugins/activity'\nimport { extraToTask, ICustomAssignment } from './plugins/customAssignments'\nimport { assignmentInDone, removeFromDone, saveDone } from './plugins/done'\nimport { assignmentInModified, removeFromModified, saveModified } from './plugins/modifiedAssignments'\nimport { state } from './state'\nimport { _$, dateString, elemById, element, localStorageRead, smoothScroll } from './util'\n\nexport interface ISplitAssignment {\n    assignment: IAssignment\n    start: Date\n    end: Date|'Forever'\n    custom: boolean\n    reference?: ICustomAssignment\n}\n\nconst SCHEDULE_ENDS = {\n    day: (date: Date) => 24 * 3600 * 1000,\n    ms: (date: Date) => [24,              // Sunday\n                         15 + (35 / 60),  // Monday\n                         15 + (35 / 60),  // Tuesday\n                         15 + (15 / 60),  // Wednesday\n                         15 + (15 / 60),  // Thursday\n                         15 + (15 / 60),  // Friday\n                         24               // Saturday\n                        ][date.getDay()],\n    us: (date: Date) => 15 * 3600 * 1000\n}\nconst WEEKEND_CLASSNAMES = ['fromWeekend', 'overWeekend']\n\nlet scroll = 0 // The location to scroll to in order to reach today in calendar view\n\nexport function getScroll(): number {\n    return scroll\n}\n\nexport function getTimeAfter(date: Date): number {\n    const hideAssignments = state.hideAssignments.get()\n    if (hideAssignments === 'day' || hideAssignments === 'ms' || hideAssignments === 'us') {\n        return SCHEDULE_ENDS[hideAssignments](date)\n    } else {\n        return SCHEDULE_ENDS.day(date)\n    }\n}\n\nfunction getStartEndDates(data: IApplicationData): {start: Date, end: Date } {\n    if (data.monthView) {\n        const startN = Math.min(...data.assignments.map((a) => a.start)) // Smallest date\n        const endN = Math.max(...data.assignments.map((a) => a.start)) // Largest date\n\n        const year = (new Date()).getFullYear() // For future calculations\n\n        // Calculate what month we will be displaying by finding the month of today\n        const month = (new Date()).getMonth() + state.calDateOffset.get()\n\n        // Make sure the start and end dates lie within the month\n        const start = new Date(Math.max(fromDateNum(startN).getTime(), (new Date(year, month)).getTime()))\n        // If the day argument for Date is 0, then the resulting date will be of the previous month\n        const end = new Date(Math.min(fromDateNum(endN).getTime(), (new Date(year, month + 1, 0)).getTime()))\n        return { start, end }\n      } else {\n        const todaySE = new Date()\n        const start = new Date(todaySE.getFullYear(), todaySE.getMonth(), todaySE.getDate())\n        const end = new Date(todaySE.getFullYear(), todaySE.getMonth(), todaySE.getDate())\n        return { start, end }\n      }\n}\n\nfunction getAssignmentSplits(assignment: IAssignment, start: Date, end: Date,\n                             reference?: ICustomAssignment): ISplitAssignment[] {\n    const split: ISplitAssignment[] = []\n    if (state.assignmentSpan.get() === 'multiple') {\n        const s = Math.max(start.getTime(), fromDateNum(assignment.start).getTime())\n        const e = assignment.end === 'Forever' ? s : Math.min(end.getTime(), fromDateNum(assignment.end).getTime())\n        const span = ((e - s) / 1000 / 3600 / 24) + 1 // Number of days assignment takes up\n        const spanRelative = 6 - (new Date(s)).getDay() // Number of days until the next Saturday\n\n        const ns = new Date(s)\n        ns.setDate(ns.getDate() + spanRelative) //  The date of the next Saturday\n\n        // tslint:disable-next-line no-loops\n        for (let n = -6; n < span - spanRelative; n += 7) {\n            const lastSun = new Date(ns)\n            lastSun.setDate(lastSun.getDate() + n)\n\n            const nextSat = new Date(lastSun)\n            nextSat.setDate(nextSat.getDate() + 6)\n            split.push({\n                assignment,\n                start: new Date(Math.max(s, lastSun.getTime())),\n                end: new Date(Math.min(e, nextSat.getTime())),\n                custom: Boolean(reference),\n                reference\n            })\n        }\n    } else if (state.assignmentSpan.get() === 'start') {\n        const s = fromDateNum(assignment.start)\n        if (s.getTime() >= start.getTime()) {\n            split.push({\n                assignment,\n                start: s,\n                end: s,\n                custom: Boolean(reference),\n                reference\n            })\n        }\n    } else if (state.assignmentSpan.get() === 'end') {\n        const e = assignment.end === 'Forever' ? assignment.end : fromDateNum(assignment.end)\n        const de = e === 'Forever' ? fromDateNum(assignment.start) : e\n        if (de.getTime() <= end.getTime()) {\n            split.push({\n                assignment,\n                start: de,\n                end: e,\n                custom: Boolean(reference),\n                reference\n            })\n        }\n    }\n\n    return split\n}\n\n// This function will convert the array of assignments generated by *parse* into readable HTML.\nexport function display(doScroll: boolean = true): void {\n    console.time('Displaying data')\n    try {\n        const data = state.data.get()\n        if (!data) {\n            throw new Error('Data should have been fetched before display() was called')\n        }\n\n        document.body.setAttribute('data-pcrview', data.monthView ? 'month' : 'other')\n        const main = _$(document.querySelector('main'))\n        const taken: { [date: number]: number[] } = {}\n\n        const timeafter = getTimeAfter(new Date())\n\n        const {start, end} = getStartEndDates(data)\n\n        // Set the start date to be a Sunday and the end date to be a Saturday\n        start.setDate(start.getDate() - start.getDay())\n        end.setDate(end.getDate() + (6 - end.getDay()))\n\n        // First populate the calendar with boxes for each day\n        // Only consider the previous set of assignments for activity purposes if the month is the same\n        const lastData = data.monthOffset === 0 ? (localStorageRead('data') as IApplicationData) : null\n        let wk: HTMLElement|null = null\n        iterDays(start, end, (d) => {\n            if (d.getDay() === 0) {\n                const id = `wk${d.getMonth()}-${d.getDate()}` // Don't create a new week element if one already exists\n                wk = document.getElementById(id)\n                if (wk == null) {\n                    wk = createWeek(id)\n                    main.appendChild(wk)\n                }\n            }\n\n            if (!wk) throw new Error(`Expected week element on day ${d} to not be null`)\n            if (wk.getElementsByClassName('day').length <= d.getDay()) {\n                wk.appendChild(createDay(d))\n            }\n\n            taken[d.getTime()] = []\n        })\n\n        // Split assignments taking more than 1 week\n        const split: ISplitAssignment[] = []\n        data.assignments.forEach((assignment, num) => {\n            split.push(...getAssignmentSplits(assignment, start, end))\n\n            // Activity stuff\n            if (lastData != null) {\n                const oldAssignment = lastData.assignments.find((a) => a.id === assignment.id)\n                if (oldAssignment) {\n                    if (oldAssignment.body !== assignment.body) {\n                        addActivity('edit', oldAssignment, new Date(), true,\n                                    oldAssignment.class != null ? lastData.classes[oldAssignment.class] : undefined)\n                        removeFromModified(assignment.id) // If the assignment is modified, reset it\n                    }\n                    lastData.assignments.splice(lastData.assignments.indexOf(oldAssignment), 1)\n                } else {\n                    addActivity('add', assignment, new Date(), true)\n                }\n            }\n        })\n\n        if (lastData != null) {\n            // Check if any of the last assignments weren't deleted (so they have been deleted in PCR)\n            lastData.assignments.forEach((assignment) => {\n                addActivity('delete', assignment, new Date(), true,\n                            assignment.class != null ? lastData.classes[assignment.class] : undefined)\n                removeFromDone(assignment.id)\n                removeFromModified(assignment.id)\n            })\n\n            // Then save a maximum of 128 activity items\n            saveActivity()\n\n            // And completed assignments + modifications\n            saveDone()\n            saveModified()\n        }\n\n        // Add custom assignments to the split array\n        state.extra.get().forEach((custom) => {\n            split.push(...getAssignmentSplits(extraToTask(custom, data), start, end, custom))\n        })\n\n        // Calculate the today's week id\n        const tdst = new Date()\n        tdst.setDate(tdst.getDate() - tdst.getDay())\n        const todayWkId = `wk${tdst.getMonth()}-${tdst.getDate()}`\n\n        // Then add assignments\n        const weekHeights: { [weekId: string]: number } = {}\n        const previousAssignments: { [id: string]: HTMLElement } = {}\n        Array.prototype.forEach.call(document.getElementsByClassName('assignment'), (assignment: HTMLElement) => {\n            previousAssignments[assignment.id] = assignment\n        })\n\n        split.forEach((s) => {\n            const weekId = computeWeekId(s)\n            wk = document.getElementById(weekId)\n            if (wk == null) return\n\n            const e = createAssignment(s, data)\n\n            // Calculate how many assignments are placed before the current one\n            if (!s.custom || !state.sepTasks.get()) {\n                let pos = 0\n                // tslint:disable-next-line no-loops\n                while (true) {\n                    let found = true\n                    iterDays(s.start, s.end === 'Forever' ? s.start : s.end, (d) => {\n                        if (taken[d.getTime()].indexOf(pos) !== -1) {\n                            found = false\n                        }\n                    })\n                    if (found) { break }\n                    pos++\n                }\n\n                // Append the position the assignment is at to the taken array\n                iterDays(s.start, s.end === 'Forever' ? s.start : s.end, (d) => {\n                    taken[d.getTime()].push(pos)\n                })\n\n                // Calculate how far down the assignment must be placed as to not block the ones above it\n                e.style.marginTop = (pos * 30) + 'px'\n\n                if ((weekHeights[weekId] == null) || (pos > weekHeights[weekId])) {\n                    weekHeights[weekId] = pos\n                    wk.style.height = 47 + ((pos + 1) * 30) + 'px'\n                }\n            }\n\n            // If the assignment is a test and is upcoming, add it to the upcoming tests panel.\n            if (s.assignment.end >= today() && (s.assignment.baseType === 'test' ||\n                (state.projectsInTestPane.get() && s.assignment.baseType === 'longterm'))) {\n                const te = element('div', ['upcomingTest', 'assignmentItem', s.assignment.baseType],\n                                `<i class='material-icons'>\n                                        ${s.assignment.baseType === 'longterm' ? 'assignment' : 'assessment'}\n                                    </i>\n                                    <span class='title'>${s.assignment.title}</span>\n                                    <small>${separatedClass(s.assignment, data)[2]}</small>\n                                    <div class='range'>${dateString(s.assignment.end, true)}</div>`,\n                                `test${s.assignment.id}`)\n                if (s.assignment.class) te.setAttribute('data-class', data.classes[s.assignment.class])\n                te.addEventListener('click', () => {\n                    const doScrolling = async () => {\n                        await smoothScroll((e.getBoundingClientRect().top + document.body.scrollTop) - 116)\n                        e.click()\n                    }\n                    if (document.body.getAttribute('data-view') === '0') {\n                        doScrolling()\n                    } else {\n                        _$(document.querySelector('#navTabs>li:first-child') as HTMLElement).click()\n                        setTimeout(doScrolling, 500)\n                    }\n                })\n\n                if (assignmentInDone(s.assignment.id)) {\n                    te.classList.add('done')\n                }\n                const testElem = document.getElementById(`test${s.assignment.id}`)\n                if (testElem) {\n                testElem.innerHTML = te.innerHTML\n                } else {\n                    elemById('infoTests').appendChild(te)\n                }\n            }\n\n            const already = document.getElementById(s.assignment.id + weekId)\n            if (already != null) { // Assignment already exists\n                already.style.marginTop = e.style.marginTop\n                already.setAttribute('data-class',\n                    s.custom && state.sepTaskClass.get() ? 'Task' : classById(s.assignment.class))\n                if (!assignmentInModified(s.assignment.id)) {\n                    already.getElementsByClassName('body')[0].innerHTML = e.getElementsByClassName('body')[0].innerHTML\n                }\n                _$(already.querySelector('.edits')).className = _$(e.querySelector('.edits')).className\n                if (already.classList.toggle) {\n                    already.classList.toggle('listDisp', e.classList.contains('listDisp'))\n                }\n                getES(already).forEach((cl) => already.classList.remove(cl))\n                getES(e).forEach((cl) => already.classList.add(cl))\n                WEEKEND_CLASSNAMES.forEach((cl) => {\n                    already.classList.remove(cl)\n                    if (e.classList.contains(cl)) already.classList.add(cl)\n                })\n            } else {\n                if (s.custom && state.sepTasks.get()) {\n                    const st = Math.floor(s.start.getTime() / 1000 / 3600 / 24)\n                    if ((s.assignment.start === st) &&\n                        (s.assignment.end === 'Forever' || s.assignment.end >= today())) {\n                        e.classList.remove('assignment')\n                        e.classList.add('taskPaneItem')\n                        e.style.order = String(s.assignment.end === 'Forever' ? Number.MAX_VALUE : s.assignment.end)\n                        const link = e.querySelector('.linked')\n                        if (link) {\n                            e.insertBefore(element('small', [], link.innerHTML), link)\n                            link.remove()\n                        }\n                        elemById('infoTasksInner').appendChild(e)\n                    }\n                } else { wk.appendChild(e) }\n            }\n            delete previousAssignments[s.assignment.id + weekId]\n        })\n\n        // Delete any assignments that have been deleted since updating\n        Object.entries(previousAssignments).forEach(([name, assignment]) => {\n            if (assignment.classList.contains('full')) {\n                elemById('background').classList.remove('active')\n            }\n            assignment.remove()\n        })\n\n        // Scroll to the correct position in calendar view\n        if (weekHeights[todayWkId] != null) {\n            let h = 0\n            const sw = (wkid: string) => wkid.substring(2).split('-').map((x) => Number(x))\n            const todayWk = sw(todayWkId)\n            Object.entries(weekHeights).forEach(([wkId, val]) => {\n                const wkSplit = sw(wkId)\n                if ((wkSplit[0] < todayWk[0]) || ((wkSplit[0] === todayWk[0]) && (wkSplit[1] < todayWk[1]))) {\n                    h += val\n                }\n            })\n            scroll = (h * 30) + 112 + 14\n            // Also show the day headers if today's date is displayed in the first row of the calendar\n            if (scroll < 50) scroll = 0\n            if (doScroll && (document.body.getAttribute('data-view') === '0') &&\n                !document.body.querySelector('.full')) {\n                // in calendar view\n                window.scrollTo(0, scroll)\n            }\n        }\n\n        document.body.classList.toggle('noList',\n            document.querySelectorAll('.assignment.listDisp:not(.done)').length === 0)\n        if (document.body.getAttribute('data-view') === '1') { // in list view\n            resize()\n        }\n    } catch (err) {\n        displayError(err)\n    }\n    console.timeEnd('Displaying data')\n}\n\n// The function below converts an update time to a human-readable date.\nexport function formatUpdate(date: number): string {\n  const now = new Date()\n  const update = new Date(+date)\n  if (now.getDate() === update.getDate()) {\n    let ampm = 'AM'\n    let hr = update.getHours()\n    if (hr > 12) {\n      ampm = 'PM'\n      hr -= 12\n    }\n    const min = update.getMinutes()\n    return `Today at ${hr}:${min < 10 ? `0${min}` : min} ${ampm}`\n  } else {\n    const daysPast = Math.ceil((now.getTime() - update.getTime()) / 1000 / 3600 / 24)\n    if (daysPast === 1) { return 'Yesterday' } else { return daysPast + ' days ago' }\n  }\n}\n","/**\n * All this is responsible for is creating snackbars.\n */\n\nimport { element, forceLayout } from '../util'\n\n/**\n * Creates a snackbar without an action\n * @param message The snackbar's message\n */\nexport function snackbar(message: string): void\n/**\n * Creates a snackbar with an action\n * @param message The snackbar's message\n * @param action Optional text to show as a message action\n * @param f      A function to execute when the action is clicked\n */\nexport function snackbar(message: string, action: string, f: () => void): void\nexport function snackbar(message: string, action?: string, f?: () => void): void {\n    const snack = element('div', 'snackbar')\n    const snackInner = element('div', 'snackInner', message)\n    snack.appendChild(snackInner)\n\n    if ((action != null) && (f != null)) {\n        const actionE = element('a', [], action)\n        actionE.addEventListener('click', () => {\n            snack.classList.remove('active')\n            f()\n        })\n        snackInner.appendChild(actionE)\n    }\n\n    const add = () => {\n      document.body.appendChild(snack)\n      forceLayout(snack)\n      snack.classList.add('active')\n      setTimeout(() => {\n          snack.classList.remove('active')\n          setTimeout(() => snack.remove(), 900)\n      }, 5000)\n    }\n\n    const existing = document.querySelector('.snackbar')\n    if (existing != null) {\n        existing.classList.remove('active')\n        setTimeout(add, 300)\n    } else {\n        add()\n    }\n}\n","import { state } from '../state'\nimport { localStorageWrite } from '../util'\n\nconst DONE_STORAGE_NAME = 'done'\n\nexport function removeFromDone(id: string): void {\n    const index = state.done.get().indexOf(id)\n    if (index >= 0) state.done.get().splice(index, 1)\n}\n\nexport function addToDone(id: string): void {\n    state.done.get().push(id)\n}\n\nexport function saveDone(): void {\n    state.done.forceUpdate()\n}\n\nexport function assignmentInDone(id: string): boolean {\n    return state.done.get().includes(id)\n}\n","import { _$, animateEl } from '../util'\n\n// For list view, the assignments can't be on top of each other.\n// Therefore, a listener is attached to the resizing of the browser window.\nlet ticking = false\nlet timeoutId: number|null = null\nexport function getResizeAssignments(): HTMLElement[] {\n    const assignments = Array.from(document.querySelectorAll(document.body.classList.contains('showDone') ?\n        '.assignment.listDisp' : '.assignment.listDisp:not(.done)'))\n    assignments.sort((a, b) => {\n        const ad = a.classList.contains('done')\n        const bd = b.classList.contains('done')\n        if (ad && !bd) { return 1 }\n        if (bd && !ad) { return -1 }\n        return Number((a.querySelector('.due') as HTMLInputElement).value)\n             - Number((b.querySelector('.due') as HTMLInputElement).value)\n    })\n    return assignments as HTMLElement[]\n}\n\nexport function resizeCaller(): void {\n    if (!ticking) {\n        requestAnimationFrame(resize)\n        ticking = true\n    }\n}\n\nlet lastColumns: number|null = null\nlet lastAssignments: number|null = null\nlet lastDoneCount: number|null = null\n\nexport function resize(): void {\n    ticking = true\n    // To calculate the number of columns, the below algorithm is used becase as the screen size\n    // increases, the column width increases\n    const widths = document.body.classList.contains('showInfo') ?\n        [650, 1100, 1800, 2700, 3800, 5100] : [350, 800, 1500, 2400, 3500, 4800]\n    let columns = 1\n    widths.forEach((w, index) => {\n        if (window.innerWidth > w) { columns = index + 1 }\n    })\n\n    const columnHeights = Array.from(new Array(columns), () => 0)\n    const cch: number[] = []\n    const assignments = getResizeAssignments()\n    const doneCount = assignments.filter((a) => a.classList.contains('done')).length\n    assignments.forEach((assignment, n) => {\n        const col = n % columns\n        cch.push(columnHeights[col])\n        columnHeights[col] += assignment.offsetHeight + 24\n    })\n    assignments.forEach((assignment, n) => {\n        const col = n % columns\n        assignment.style.top = cch[n] + 'px'\n        if (columns !== lastColumns || assignments.length !== lastAssignments || doneCount !== lastDoneCount) {\n            const left = ((100 / columns) * col) + '%'\n            const right = ((100 / columns) * (columns - col - 1)) + '%'\n            if (lastColumns === null) {\n                assignment.style.left = left\n                assignment.style.right = right\n            } else {\n                animateEl(assignment, [\n                    {\n                        left: assignment.style.left || left,\n                        right: assignment.style.right || right\n                    },\n                    { left, right }\n                ], { duration: 300 }).then(() => {\n                    assignment.style.left = left\n                    assignment.style.right = right\n                })\n            }\n        }\n    })\n    if (timeoutId) clearTimeout(timeoutId)\n    timeoutId = setTimeout(() => {\n        cch.length = 0\n        assignments.forEach((assignment, n) => {\n            const col = n % columns\n            if (n < columns) {\n                columnHeights[col] = 0\n            }\n            cch.push(columnHeights[col])\n            columnHeights[col] += assignment.offsetHeight + 24\n        })\n        assignments.forEach((assignment, n) => {\n            assignment.style.top = cch[n] + 'px'\n        })\n    }, 500)\n    lastColumns = columns\n    lastAssignments = assignments.length\n    lastDoneCount = doneCount\n    ticking = false\n}\n","import { state } from '../state'\nimport { localStorageWrite } from '../util'\n\nexport interface IModifiedBodies {\n    [id: string]: string\n}\n\nexport function removeFromModified(id: string): void {\n    delete state.modified.get()[id]\n}\n\nexport function saveModified(): void {\n    state.modified.forceUpdate()\n}\n\nexport function assignmentInModified(id: string): boolean {\n    return state.modified.get().hasOwnProperty(id)\n}\n\nexport function modifiedBody(id: string): string|undefined {\n    return state.modified.get()[id]\n}\n\nexport function setModified(id: string, body: string): void {\n    state.modified.get()[id] = body\n}\n","import { IApplicationData, IAssignment } from '../pcr'\nimport { state } from '../state'\n\nexport interface ICustomAssignment {\n    body: string\n    done: boolean\n    start: number\n    class: string|null\n    end: number|'Forever'\n}\nexport function addToExtra(custom: ICustomAssignment): void {\n    state.extra.get().push(custom)\n}\n\nexport function removeFromExtra(custom: ICustomAssignment): void {\n    const extra = state.extra.get()\n    if (!extra.includes(custom)) throw new Error('Cannot remove custom assignment that does not exist')\n    extra.splice(extra.indexOf(custom), 1)\n}\n\nexport function extraToTask(custom: ICustomAssignment, data: IApplicationData): IAssignment {\n    let cls: number|null = null\n    const className = custom.class\n    if (className != null) {\n        cls = data.classes.findIndex((c) => c.toLowerCase().includes(className))\n    }\n\n    return {\n        title: 'Task',\n        baseType: 'task',\n        type: 'task',\n        attachments: [],\n        start: custom.start,\n        end: custom.end || 'Forever',\n        body: custom.body,\n        id: `task${custom.body.replace(/[^\\w]*/g, '')}${custom.start}${custom.end}${custom.class}`,\n        class: cls === -1 ? null : cls\n    }\n}\n\ninterface IParseResult {\n    text: string\n    cls?: string\n    due?: string\n    st?: string\n}\n\nexport function parseCustomTask(text: string, result: IParseResult = { text: '' }): IParseResult {\n    const parsed = text.match(/(.*) (for|by|due|assigned|starting|ending|beginning) (.*)/)\n    if (parsed == null) {\n        result.text = text\n        return result\n    }\n\n    switch (parsed[2]) {\n        case 'for': result.cls = parsed[3]; break\n        case 'by': case 'due': case 'ending': result.due = parsed[3]; break\n        case 'assigned': case 'starting': case 'beginning': result.st = parsed[3]; break\n    }\n\n    return parseCustomTask(parsed[1], result)\n}\n","import { fromDateNum, today } from '../dates'\nimport { display, getTimeAfter, ISplitAssignment } from '../display'\nimport { getAttachmentMimeType, IApplicationData, IAssignment, urlForAttachment } from '../pcr'\nimport { recentActivity } from '../plugins/activity'\nimport { removeFromExtra } from '../plugins/customAssignments'\nimport { addToDone, assignmentInDone, removeFromDone, saveDone } from '../plugins/done'\nimport { modifiedBody, removeFromModified, saveModified, setModified } from '../plugins/modifiedAssignments'\nimport { state } from '../state'\nimport { _$, cssNumber, dateString, elemById, element, forceLayout, ripple } from '../util'\nimport { resize } from './resizer'\n\nconst mimeTypes: { [mime: string]: [string, string] } = {\n    'application/msword': ['Word Doc', 'document'],\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['Word Doc', 'document'],\n    'application/vnd.ms-powerpoint': ['PPT Presentation', 'slides'],\n    'application/pdf': ['PDF File', 'pdf'],\n    'text/plain': ['Text Doc', 'plain']\n}\n\nconst dmp = new diff_match_patch() // For diffing\n\nfunction populateAddedDeleted(diffs: any[], edits: HTMLElement): boolean {\n    let added = 0\n    let deleted = 0\n    diffs.forEach((diff) => {\n        if (diff[0] === 1) { added++ }\n        if (diff[0] === -1) { deleted++ }\n    })\n    _$(edits.querySelector('.additions')).innerHTML = added !== 0 ? `+${added}` : ''\n    _$(edits.querySelector('.deletions')).innerHTML = deleted !== 0 ? `-${deleted}` : ''\n    edits.classList.add('notEmpty')\n    return added > 0 || deleted > 0\n}\n\nexport function computeWeekId(split: ISplitAssignment): string {\n    const startSun = new Date(split.start.getTime())\n    startSun.setDate(startSun.getDate() - startSun.getDay())\n    return `wk${startSun.getMonth()}-${startSun.getDate()}`\n}\n\n// This function separates the parts of a class name.\nexport function separate(cl: string): RegExpMatchArray {\n    const m = cl.match(/((?:\\d*\\s+)?(?:(?:hon\\w*|(?:adv\\w*\\s*)?core)\\s+)?)(.*)/i)\n    if (m == null) throw new Error(`Could not separate class string ${cl}`)\n    return m\n}\n\nexport function assignmentClass(assignment: IAssignment, data: IApplicationData): string {\n    const cls = (assignment.class != null) ? data.classes[assignment.class] : 'Task'\n    if (cls == null) throw new Error(`Could not find class ${assignment.class} in ${data.classes}`)\n    return cls\n}\n\nexport function separatedClass(assignment: IAssignment, data: IApplicationData): RegExpMatchArray {\n    return separate(assignmentClass(assignment, data))\n}\n\nexport function createAssignment(split: ISplitAssignment, data: IApplicationData): HTMLElement {\n    const { assignment, reference } = split\n\n    // Separate the class description from the actual class\n    const separated = separatedClass(assignment, data)\n\n    const weekId = computeWeekId(split)\n\n    let smallTag = 'small'\n    let link = null\n    const athenaData = state.athenaData.get()\n    if (athenaData && assignment.class != null && (athenaData[data.classes[assignment.class]] != null)) {\n        link = athenaData[data.classes[assignment.class]].link\n        smallTag = 'a'\n    }\n\n    const e = element('div', ['assignment', assignment.baseType, 'anim'],\n                      `<${smallTag}${link ? ` href='${link}' class='linked' target='_blank'` : ''}>\n                           <span class='extra'>${separated[1]}</span>\n                           ${separated[2]}\n                       </${smallTag}><span class='title'>${assignment.title}</span>\n                       <input type='hidden' class='due'\n                              value='${assignment.end === 'Forever' ? 0 : assignment.end}' />`,\n                      assignment.id + weekId)\n\n    if (( reference && reference.done) || assignmentInDone(assignment.id)) {\n        e.classList.add('done')\n    }\n    e.setAttribute('data-class', assignmentClass(assignment, data))\n    const close = element('a', ['close', 'material-icons'], 'close')\n    close.addEventListener('click', closeOpened)\n    e.appendChild(close)\n\n    // Prevent clicking the class name when an item is displayed on the calendar from doing anything\n    if (link != null) {\n        _$(e.querySelector('a')).addEventListener('click', (evt) => {\n            if ((document.body.getAttribute('data-view') === '0') && !e.classList.contains('full')) {\n                evt.preventDefault()\n            }\n        })\n    }\n\n    const complete = element('a', ['complete', 'material-icons', 'waves'], 'done')\n    ripple(complete)\n    const id = split.assignment.id\n    complete.addEventListener('mouseup', (evt) => {\n        if (evt.which === 1) { // Left button\n            let added = true\n            if (reference != null) { // Task item\n                if (e.classList.contains('done')) {\n                    reference.done = false\n                } else {\n                    added = false\n                    reference.done = true\n                }\n                state.extra.forceUpdate()\n            } else {\n                if (e.classList.contains('done')) {\n                    removeFromDone(assignment.id)\n                } else {\n                    added = false\n                    addToDone(assignment.id)\n                }\n                saveDone()\n            }\n            if (document.body.getAttribute('data-view') === '1') {\n            setTimeout(() => {\n                document.querySelectorAll(\n                    `.assignment[id^=\\\"${id}\\\"], #test${id}, #activity${id}, #ia${id}`\n                ).forEach((elem) => {\n                    elem.classList.toggle('done')\n                })\n                if (added) {\n                    if (document.querySelectorAll('.assignment.listDisp:not(.done)').length !== 0) {\n                        document.body.classList.remove('noList')\n                    }\n                } else {\n                    if (document.querySelectorAll('.assignment.listDisp:not(.done)').length === 0) {\n                        document.body.classList.add('noList')\n                    }\n                }\n                resize()\n            }, 100)\n        } else {\n            document.querySelectorAll(\n                `.assignment[id^=\\\"${id}\\\"], #test${id}, #activity${id}, #ia${id}`\n            ).forEach((elem) => {\n                elem.classList.toggle('done')\n            })\n            if (added) {\n                if (document.querySelectorAll('.assignment.listDisp:not(.done)').length !== 0) {\n                    document.body.classList.remove('noList')\n                }\n            } else {\n                if (document.querySelectorAll('.assignment.listDisp:not(.done)').length === 0) {\n                    document.body.classList.add('noList')\n                }\n            }\n            }\n        }\n    })\n    e.appendChild(complete)\n\n    // If the assignment is a custom one, add a button to delete it\n    if (split.custom) {\n        const deleteA = element('a', ['material-icons', 'deleteAssignment', 'waves'], 'delete')\n        ripple(deleteA)\n        deleteA.addEventListener('mouseup', (evt) => {\n            if (evt.which !== 1 || !reference) return\n            removeFromExtra(reference)\n            state.extra.forceUpdate()\n            if (document.querySelector('.full') != null) {\n                document.body.style.overflow = 'auto'\n                const back = elemById('background')\n                back.classList.remove('active')\n                setTimeout(() => {\n                    back.style.display = 'none'\n                }, 350)\n            }\n            e.remove()\n            display(false)\n        })\n        e.appendChild(deleteA)\n    }\n\n    // Modification button\n    const edit = element('a', ['editAssignment', 'material-icons', 'waves'], 'edit')\n    edit.addEventListener('mouseup', (evt) => {\n        if (evt.which === 1) {\n            const remove = edit.classList.contains('active')\n            edit.classList.toggle('active')\n            _$(e.querySelector('.body')).setAttribute('contentEditable', remove ? 'false' : 'true')\n            if (!remove) {\n                (e.querySelector('.body') as HTMLElement).focus()\n            }\n            const dn = e.querySelector('.complete') as HTMLElement\n            dn.style.display = remove ? 'block' : 'none'\n        }\n    })\n    ripple(edit)\n\n    e.appendChild(edit)\n\n    const start = new Date(fromDateNum(assignment.start))\n    const end = assignment.end === 'Forever' ? assignment.end : new Date(fromDateNum(assignment.end))\n    const times = element('div', 'range',\n        assignment.start === assignment.end ? dateString(start) : `${dateString(start)} &ndash; ${dateString(end)}`)\n    e.appendChild(times)\n    if (assignment.attachments.length > 0) {\n        const attachments = element('div', 'attachments')\n        assignment.attachments.forEach((attachment) => {\n            const a = element('a', [], attachment[0]) as HTMLAnchorElement\n            a.href = urlForAttachment(attachment[1])\n            getAttachmentMimeType(attachment[1]).then((type) => {\n                let span\n                if (mimeTypes[type] != null) {\n                    a.classList.add(mimeTypes[type][1])\n                    span = element('span', [], mimeTypes[type][0])\n                } else {\n                    span = element('span', [], 'Unknown file type')\n                }\n                a.appendChild(span)\n            })\n            attachments.appendChild(a)\n        })\n        e.appendChild(attachments)\n    }\n\n    const body = element('div', 'body',\n        assignment.body.replace(/font-family:[^;]*?(?:Times New Roman|serif)[^;]*/g, ''))\n    const edits = element('div', 'edits', '<span class=\\'additions\\'></span><span class=\\'deletions\\'></span>')\n    const m = modifiedBody(assignment.id)\n    if (m != null) {\n        const d = dmp.diff_main(assignment.body, m)\n        dmp.diff_cleanupSemantic(d)\n        if (d.length !== 0) { // Has been edited\n            populateAddedDeleted(d, edits)\n            body.innerHTML = m\n        }\n    }\n\n    body.addEventListener('input', (evt) => {\n        if (reference != null) {\n            reference.body = body.innerHTML\n            state.extra.forceUpdate()\n        } else {\n            setModified(assignment.id,  body.innerHTML)\n            saveModified()\n            const d = dmp.diff_main(assignment.body, body.innerHTML)\n            dmp.diff_cleanupSemantic(d)\n            if (populateAddedDeleted(d, edits)) {\n                edits.classList.add('notEmpty')\n            } else {\n                edits.classList.remove('notEmpty')\n            }\n        }\n        if (document.body.getAttribute('data-view') === '1') resize()\n    })\n\n    e.appendChild(body)\n\n    const restore = element('a', ['material-icons', 'restore'], 'settings_backup_restore')\n    restore.addEventListener('click', () => {\n        removeFromModified(assignment.id)\n        saveModified()\n        body.innerHTML = assignment.body\n        edits.classList.remove('notEmpty')\n        if (document.body.getAttribute('data-view') === '1')  resize()\n    })\n    edits.appendChild(restore)\n    e.appendChild(edits)\n\n    const mods = element('div', ['mods'])\n    recentActivity().forEach((a) => {\n        if ((a[0] === 'edit') && (a[1].id === assignment.id)) {\n        const te = element('div', ['innerActivity', 'assignmentItem', assignment.baseType],\n                           `<i class='material-icons'>edit</i>\n                            <span class='title'>${dateString(new Date(a[2]))}</span>\n                            <span class='additions'></span><span class='deletions'></span>`,\n                           `ia${assignment.id}`)\n        const d = dmp.diff_main(a[1].body, assignment.body)\n        dmp.diff_cleanupSemantic(d)\n        populateAddedDeleted(d, te)\n\n        if (assignment.class) te.setAttribute('data-class', data.classes[assignment.class])\n        te.appendChild(element('div', 'iaDiff', dmp.diff_prettyHtml(d)))\n        te.addEventListener('click', () => {\n            te.classList.toggle('active')\n            if (document.body.getAttribute('data-view') === '1') resize()\n        })\n        mods.appendChild(te)\n        }\n    })\n    e.appendChild(mods)\n\n    if (state.assignmentSpan.get() === 'multiple' && (start < split.start)) {\n        e.classList.add('fromWeekend')\n    }\n    if (state.assignmentSpan.get() === 'multiple' && (end > split.end)) {\n        e.classList.add('overWeekend')\n    }\n    e.classList.add(`s${split.start.getDay()}`)\n    if (split.end !== 'Forever') e.classList.add(`e${6 - split.end.getDay()}`)\n\n    const st = Math.floor(split.start.getTime() / 1000 / 3600 / 24)\n    if (split.assignment.end === 'Forever') {\n        if (st <= (today() + state.listDateOffset.get())) {\n            e.classList.add('listDisp')\n        }\n    } else {\n        const midDate = new Date()\n        midDate.setDate(midDate.getDate() + state.listDateOffset.get())\n        const push = (assignment.baseType === 'test' && assignment.start === st) ? state.earlyTest.get() : 0\n        const endExtra = state.listDateOffset.get() === 0 ? getTimeAfter(midDate) : 24 * 3600 * 1000\n        if (fromDateNum(st - push) <= midDate &&\n            (split.end === 'Forever' || midDate.getTime() <= split.end.getTime() + endExtra)) {\n            e.classList.add('listDisp')\n        }\n    }\n\n    // Add click interactivity\n    if (!split.custom || !state.sepTasks.get()) {\n        e.addEventListener('click', (evt) => {\n            if ((document.getElementsByClassName('full').length === 0) &&\n                (document.body.getAttribute('data-view') === '0')) {\n                e.classList.remove('anim')\n                e.classList.add('modify')\n                const top = (e.getBoundingClientRect().top - document.body.scrollTop\n                            - cssNumber(e.style.marginTop)) + 44\n                e.style.top = top - window.pageYOffset + 'px'\n                e.setAttribute('data-top', String(top))\n                document.body.style.overflow = 'hidden'\n                const back = elemById('background')\n                back.classList.add('active')\n                back.style.display = 'block'\n                e.classList.add('anim')\n                forceLayout(e)\n                e.classList.add('full')\n                e.style.top = (75 - cssNumber(e.style.marginTop)) + 'px'\n                setTimeout(() => e.classList.remove('anim'), 350)\n            }\n        })\n    }\n\n    return e\n}\n\n// In order to display an assignment in the correct X position, classes with names eX and eX are\n// used, where X is the number of squares to from the assignment to the left/right side of the\n// screen. The function below determines which eX and sX class the given element has.\nexport function getES(el: HTMLElement): [string, string] {\n    let e = 0\n    let s = 0\n\n    Array.from(new Array(7), (_, x) => x).forEach((x) => {\n        if (el.classList.contains(`e${x}`)) {\n            e = x\n        }\n        if (el.classList.contains(`s${x}`)) {\n            s = x\n        }\n    })\n    return [`e${e}`, `s${s}`]\n}\n\n// Below is a function to close the current assignment that is opened.\nexport function closeOpened(evt: Event): void {\n    evt.stopPropagation()\n    const el = document.querySelector('.full') as HTMLElement|null\n    if (el == null) return\n\n    el.style.top = Number(el.getAttribute('data-top') || '0') - window.pageYOffset + 'px'\n    el.classList.add('anim')\n    el.classList.remove('full')\n    el.scrollTop = 0\n    document.body.style.overflow = 'auto'\n    const back = elemById('background')\n    back.classList.remove('active')\n\n    const transitionListener = () => {\n        back.style.display = 'none'\n        el.classList.remove('anim')\n        el.classList.remove('modify')\n        el.style.top = 'auto'\n        forceLayout(el)\n        el.classList.add('anim')\n        el.removeEventListener('transitionend', transitionListener)\n    }\n\n    el.addEventListener('transitionend', transitionListener)\n}\n","import { classById, IAssignment } from '../pcr'\nimport { ActivityType } from '../plugins/activity'\nimport { assignmentInDone } from '../plugins/done'\nimport { _$, dateString, elemById, element, smoothScroll } from '../util'\nimport { separate } from './assignment'\n\nexport function addActivityElement(el: HTMLElement): void {\n    const insertTo = elemById('infoActivity')\n    insertTo.insertBefore(el, insertTo.querySelector('.activity'))\n}\n\nexport function createActivity(type: ActivityType, assignment: IAssignment, date: Date,\n                               className?: string ): HTMLElement {\n    const cname = className || classById(assignment.class)\n\n    const te = element('div', ['activity', 'assignmentItem', assignment.baseType, type], `\n        <i class='material-icons'>${type}</i>\n        <span class='title'>${assignment.title}</span>\n        <small>${separate(cname)[2]}</small>\n        <div class='range'>${dateString(date)}</div>`, `activity${assignment.id}`)\n    te.setAttribute('data-class', cname)\n    const { id } = assignment\n    if (type !== 'delete') {\n        te.addEventListener('click', () => {\n            const doScrolling = async () => {\n                const el = _$(document.querySelector(`.assignment[id*=\\\"${id}\\\"]`)) as HTMLElement\n                await smoothScroll((el.getBoundingClientRect().top + document.body.scrollTop) - 116)\n                el.click()\n            }\n            if (document.body.getAttribute('data-view') === '0') {\n            return doScrolling()\n            } else {\n                (_$(document.querySelector('#navTabs>li:first-child')) as HTMLElement).click()\n                return setTimeout(doScrolling, 500)\n            }\n        })\n    }\n\n    if (assignmentInDone(assignment.id)) {\n      te.classList.add('done')\n    }\n    return te\n}\n","import { addActivityElement, createActivity } from '../components/activity'\nimport { IAssignment } from '../pcr'\nimport { state } from '../state'\n\nexport type ActivityType = 'delete' | 'edit' | 'add'\nexport type ActivityItem = [ActivityType, IAssignment, number, string | undefined]\n\nexport function addActivity(type: ActivityType, assignment: IAssignment, date: Date,\n                            newActivity: boolean, className?: string ): void {\n    if (state.calDateOffset.get() !== 0) return // Ignore activity when on another month\n    if (newActivity) state.activity.get().push([type, assignment, Date.now(), className])\n    const el = createActivity(type, assignment, date, className)\n    addActivityElement(el)\n}\n\nexport function saveActivity(): void {\n    const activity = state.activity.get()\n    state.activity.set(activity.slice(activity.length - 128, activity.length))\n}\n\nexport function recentActivity(): ActivityItem[] {\n    const activity = state.activity.get()\n    return activity.slice(activity.length - 32, activity.length)\n}\n","import { state } from './state'\nimport { elemById, element, send } from './util'\n\nexport const VERSION = '2.24.3'\n\nconst VERSION_URL = 'https://raw.githubusercontent.com/19RyanA/CheckPCR/master/version.txt'\nconst COMMIT_URL = (location.protocol === 'chrome-extension:' ?\n    'https://api.github.com/repos/19RyanA/CheckPCR/git/refs/heads/master' : '/api/commit')\nconst NEWS_URL = 'https://api.github.com/gists/21bf11a429da257539a68520f513a38b'\n\nfunction formatCommitMessage(message: string): string {\n    return message.substr(message.indexOf('\\n\\n') + 2)\n                  .replace(/\\* (.*?)(?=$|\\n)/g, (a, b) => `<li>${b}</li>`)\n                  .replace(/>\\n</g, '><')\n                  .replace(/\\n/g, '<br>')\n}\n\n// For updating, a request will be send to Github to get the current commit id and check that against what's stored\nexport async function checkCommit(): Promise<void> {\n    try {\n        const resp = await send(VERSION_URL, 'text')\n        const c = resp.responseText.trim()\n        console.log(`Latest version: ${c} ${VERSION === c ? '(no update available)' : '(update available)'}`)\n        elemById('newversion').innerHTML = c\n        if (VERSION !== c) {\n            elemById('updateIgnore').addEventListener('click', () => {\n                if (location.protocol === 'chrome-extension:') {\n                    elemById('update').classList.remove('active')\n                    setTimeout(() => {\n                        elemById('updateBackground').style.display = 'none'\n                    }, 350)\n                } else {\n                    window.location.reload()\n                }\n            })\n            const resp2 = await send(COMMIT_URL, 'json')\n            const { sha, url } = resp2.response.object\n            const resp3 = await send((location.protocol === 'chrome-extension:' ? url : `/api/commit/${sha}`), 'json')\n            elemById('pastUpdateVersion').innerHTML = VERSION\n            elemById('newUpdateVersion').innerHTML = c\n            elemById('updateFeatures').innerHTML = formatCommitMessage(resp3.response.message)\n            elemById('updateBackground').style.display = 'block'\n            elemById('update').classList.add('active')\n        }\n    } catch (err) {\n        console.log('Could not access Github. Here\\'s the error:', err)\n    }\n}\n\nexport async function fetchNews(): Promise<void> {\n    try {\n        const resp = await send(NEWS_URL, 'json')\n        const newsCommit = resp.response.history[0].version\n\n        if (state.lastNewsCommit.get() == null) {\n            state.lastNewsCommit.set(newsCommit)\n        }\n\n        state.newsUrl.set(resp.response.files['updates.htm'].raw_url)\n\n        if (state.lastNewsCommit.get() !== newsCommit) {\n            getNews().then(() => state.lastNewsCommit.set(newsCommit))\n        }\n    } catch (err) {\n        console.log('Could not access Github. Here\\'s the error:', err)\n    }\n}\n\nexport async function getNews(): Promise<void> {\n    const url = state.newsUrl.get()\n    if (!url) {\n        throw new Error('News url not yet found')\n    }\n    try {\n        const resp = await send(url)\n        resp.responseText.split('<hr>').forEach((news) => {\n            elemById('newsContent').appendChild(element('div', 'newsItem', news))\n        })\n        elemById('newsBackground').style.display = 'block'\n        elemById('news').classList.add('active')\n    } catch (err) {\n        console.log('Could not access Github. Here\\'s the error:', err)\n        throw err\n    }\n}\n","import { VERSION } from '../app'\nimport { elemById } from '../util'\n\nconst ERROR_FORM_URL = 'https://docs.google.com/a/students.harker.org/forms/d/'\n                     + '1sa2gUtYFPdKT5YENXIEYauyRPucqsQCVaQAPeF3bZ4Q/viewform'\nconst ERROR_FORM_ENTRY = '?entry.120036223='\nconst ERROR_GITHUB_URL = 'https://github.com/19RyanA/CheckPCR/issues/new'\n\nconst linkById = (id: string) => elemById(id) as HTMLLinkElement\n\n// *displayError* displays a dialog containing information about an error.\nexport function displayError(e: Error): void {\n    console.log('Displaying error', e)\n    const errorHTML = `Message: ${e.message}\\nStack: ${e.stack || (e as any).lineNumber}\\n`\n                    + `Browser: ${navigator.userAgent}\\nVersion: ${VERSION}`\n    elemById('errorContent').innerHTML = errorHTML.replace('\\n', '<br>')\n    linkById('errorGoogle').href = ERROR_FORM_URL + ERROR_FORM_ENTRY + encodeURIComponent(errorHTML)\n    linkById('errorGitHub').href =\n        ERROR_GITHUB_URL + '?body=' + encodeURIComponent(`I've encountered a bug.\\n\\n\\`\\`\\`\\n${errorHTML}\\n\\`\\`\\``)\n    elemById('errorBackground').style.display = 'block'\n    return elemById('error').classList.add('active')\n}\n\nexport function closeError(): void {\n    elemById('error').classList.remove('active')\n    setTimeout(() => {\n        elemById('errorBackground').style.display = 'none'\n    }, 350)\n}\n\nwindow.addEventListener('error', (evt) => {\n    evt.preventDefault()\n    displayError(evt.error)\n})\n","import { state } from '../state'\nimport { elemById } from '../util'\n\ninterface IRawAthenaData {\n    response_code: 200\n    body: {\n        courses: {\n            courses: IRawCourse[]\n            sections: IRawSection[]\n        }\n    }\n    permissions: any\n}\n\ninterface IRawCourse {\n    nid: number\n    course_title: string\n    // There's a bunch more that I've omitted\n}\n\ninterface IRawSection {\n    course_nid: number\n    link: string\n    logo: string\n    section_title: string\n    // There's a bunch more that I've omitted\n}\n\nexport interface IAthenaDataItem {\n    link: string\n    logo: string\n    period: string\n}\n\nexport interface IAthenaData {\n    [cls: string]: IAthenaDataItem\n}\n\nfunction formatLogo(logo: string): string {\n    return logo.substr(0, logo.indexOf('\" alt=\"'))\n                .replace('<div class=\"profile-picture\"><img src=\"', '')\n                .replace('tiny', 'reg')\n}\n\n// Now, there's the schoology/athena integration stuff. First, we need to check if it's been more\n// than a day. There's no point constantly retrieving classes from Athena; they dont't change that\n// much.\n\n// Then, once the variable for the last date is initialized, it's time to get the classes from\n// athena. Luckily, there's this file at /iapi/course/active - and it's in JSON! Life can't be any\n// better! Seriously! It's just too bad the login page isn't in JSON.\nfunction parseAthenaData(dat: string): IAthenaData|null {\n    if (dat === '') return null\n    const d = JSON.parse(dat) as IRawAthenaData\n    const athenaData2: IAthenaData = {}\n    const allCourseDetails: { [nid: number]: IRawSection } = {}\n    d.body.courses.sections.forEach((section) => {\n        allCourseDetails[section.course_nid] = section\n    })\n    d.body.courses.courses.reverse().forEach((course) => {\n        const courseDetails = allCourseDetails[course.nid]\n        athenaData2[course.course_title] = {\n            link: `https://athena.harker.org${courseDetails.link}`,\n            logo: formatLogo(courseDetails.logo),\n            period: courseDetails.section_title\n        }\n    })\n    return athenaData2\n}\n\nexport function updateAthenaData(data: string): void {\n    const refreshEl = document.getElementById('athenaDataRefresh')\n    try {\n        state.athenaData.set(parseAthenaData(data))\n        elemById('athenaDataError').style.display = 'none'\n        if (refreshEl) refreshEl.style.display = 'block'\n    } catch (e) {\n        elemById('athenaDataError').style.display = 'block'\n        if (refreshEl) refreshEl.style.display = 'none'\n        elemById('athenaDataError').innerHTML = e.message\n    }\n}\n","import { elemById, localStorageRead } from '../util'\n\n// Then, the username in the sidebar needs to be set and we need to generate an \"avatar\" based on\n// initials. To do that, some code to convert from LAB to RGB colors is borrowed from\n// https://github.com/boronine/colorspaces.js\n//\n// LAB is a color naming scheme that uses two values (A and B) along with a lightness value in order\n// to produce colors that are equally spaced between all of the colors that can be seen by the human\n// eye. This works great because everyone has letters in his/her initials.\n\n// The D65 standard illuminant\nconst REF_X = 0.95047\nconst REF_Y = 1.00000\nconst REF_Z = 1.08883\n\n// CIE L*a*b* constants\nconst LAB_E = 0.008856\nconst LAB_K = 903.3\n\nconst M = [\n    [3.2406, -1.5372, -0.4986],\n    [-0.9689, 1.8758,  0.0415],\n    [0.0557, -0.2040,  1.0570]\n]\n\nconst fInv = (t: number) => {\n    if (Math.pow(t, 3) > LAB_E) {\n    return Math.pow(t, 3)\n    } else {\n    return ((116 * t) - 16) / LAB_K\n    }\n}\nconst dotProduct = (a: number[], b: number[]) => {\n    let ret = 0\n    a.forEach((_, i) => {\n        ret += a[i] * b[i]\n    })\n    return ret\n}\nconst fromLinear = (c: number) => {\n    const a = 0.055\n    if (c <= 0.0031308) {\n        return 12.92 * c\n    } else {\n        return (1.055 * Math.pow(c, 1 / 2.4)) - 0.055\n    }\n}\n\nfunction labrgb(l: number, a: number, b: number): string {\n    const varY = (l + 16) / 116\n    const varZ = varY - (b / 200)\n    const varX = (a / 500) + varY\n    const _X = REF_X * fInv(varX)\n    const _Y = REF_Y * fInv(varY)\n    const _Z = REF_Z * fInv(varZ)\n\n    const tuple = [_X, _Y, _Z]\n\n    const _R = fromLinear(dotProduct(M[0], tuple))\n    const _G = fromLinear(dotProduct(M[1], tuple))\n    const _B = fromLinear(dotProduct(M[2], tuple))\n\n    // Original from here\n    const n = (v: number) => Math.round(Math.max(Math.min(v * 256, 255), 0))\n    return `rgb(${n(_R)}, ${n(_G)}, ${n(_B)})`\n}\n\n/**\n * Convert a letter to a float valued from 0 to 255\n */\nfunction letterToColorVal(letter: string): number {\n    return (((letter.charCodeAt(0) - 65) / 26) * 256) - 128\n}\n\n// The function below uses this algorithm to generate a background color for the initials displayed in the sidebar.\nexport function updateAvatar(): void {\n    if (!localStorageRead('username')) return\n    const userEl = document.getElementById('user')\n    const initialsEl = document.getElementById('initials')\n    if (!userEl || !initialsEl) return\n\n    userEl.innerHTML = localStorageRead('username')\n    const initials = localStorageRead('username').match(/\\d*(.).*?(.$)/) // Separate year from first name and initial\n    if (initials != null) {\n        const bg = labrgb(50, letterToColorVal(initials[1]), letterToColorVal(initials[2])) // Compute the color\n        initialsEl.style.backgroundColor = bg\n        initialsEl.innerHTML = initials[1] + initials[2]\n    }\n}\n","import { dologin, fetch } from './pcr'\nimport { updateAthenaData } from './plugins/athena'\nimport { _$h, elemById } from './util'\n\n// Welcome to the welcome file.\n//\n// This script runs on the welcome page, which welcomes new users, to make it more welcoming. If you\n// haven't already, I welcome you to view the more important [main script](client.litcoffee).\n//\n// Also, if you haven't noticed yet, I'm trying my best to use the word welcome as many times as I\n// can just to welcome you.\n//\n// First off, the buttons big, green, welcoming buttons on the bottom of the welcome page are\n// assigned event listeners so that they can make the page show more welcoming information.\nfunction advance(): void {\n    // The box holding the individual pages that ge scrolled\n    // when pressing the 'next' button is assigned to a varialbe.\n    const container = document.body\n    // show the next page\n    const view = Number(container.getAttribute('data-view'))\n    window.scrollTo(0, 0) // Scoll to top of the page\n    history.pushState({page: view + 1}, '', `?page=${view}`) // Make the broswer register a page shift\n\n    const npage = _$h(document.querySelector(`section:nth-child(${view + 2})`))\n    npage.style.display = 'inline-block'\n    npage.style.transform = npage.style.webkitTransform = `translateX(${view * 100}%)`\n    // increase the data-view attribute by 1. The rest is handled by the css.\n    container.setAttribute('data-view', String(view + 1))\n    setTimeout(() => {\n        // After animating is done, don't display the first page\n        npage.style.transform = npage.style.webkitTransform = `translateX(${view + 1}00%)`\n        _$h(document.querySelector(`section:nth-child(${view + 1})`)).style.display = 'none'\n    }, 50)\n}\n\ndocument.querySelectorAll('.next').forEach((nextButton) => {\n    if (!(nextButton instanceof HTMLAnchorElement)) return\n    if (nextButton.href) return\n    nextButton.addEventListener('click', advance)\n})\n\n// Additionally, the active class needs to be added when text fields are selected (for the login\n// box) [copied from main script].\ndocument.querySelectorAll('input[type=text], input[type=password], input[type=email], input[type=url], '\n                        + 'input[type=tel], input[type=number], input[type=search]')\n                        .forEach((input: HTMLInputElement) => {\n    input.addEventListener('change', (evt) => _$h(_$h(input.parentNode).querySelector('label')).classList.add('active'))\n    input.addEventListener('focus', (evt) => _$h(_$h(input.parentNode).querySelector('label')).classList.add('active'))\n    input.addEventListener('blur', (evt) => {\n        if (input.value.length === 0) {\n            _$h(_$h(input.parentNode).querySelector('label')).classList.remove('active')\n        }\n    })\n})\n\n// An event listener is attached to the window so that when the back button is pressed, a more\n// welcoming page is displayed. Most of the code is the same from next button event listener, except\n// that the page is switched the previous one, not the next one.\nwindow.onpopstate = (event) => {\n    const container = document.body\n    const view = (event.state != null) ? event.state.page : 0\n    window.scrollTo(0, 0) // Scoll to top of the page\n\n    const npage = _$h(document.querySelector(`section:nth-child(${view + 1})`))\n    npage.style.display = 'inline-block'\n    npage.style.transform = npage.style.webkitTransform = `translateX(${view * 100}%)`\n    // increase the data-view attribute by 1. The rest is handled by the css.\n    container.setAttribute('data-view', view)\n    setTimeout(() => {\n        // After animating is done, don't display the first page\n        npage.style.transform = npage.style.webkitTransform = `translateX(${view}00%)`\n        _$h(document.querySelector(`section:nth-child(${view + 2})`)).style.display = 'none'\n    }, 50)\n}\n\n// The text box also needs to execute this function when anything is typed / pasted.\nconst athenaDataEl = elemById('athenaData') as HTMLInputElement\nathenaDataEl.addEventListener('input', () => updateAthenaData(athenaDataEl.value))\n\nfetch(true, undefined, () => {\n    elemById('loginNext').style.display = ''\n    elemById('login').classList.add('done')\n}, () => {\n    elemById('login').classList.add('ready')\n    elemById('login').addEventListener('submit', (evt) => {\n        evt.preventDefault()\n        dologin(null, true, advance)\n    })\n})\n\nfunction closeError(): void {\n    elemById('error').classList.remove('active')\n    setTimeout(() => {\n        elemById('errorBackground').style.display = 'none'\n    }, 350)\n}\n\nelemById('errorNo').addEventListener('click', closeError)\nelemById('errorBackground').addEventListener('click', closeError)\n"],"sourceRoot":""}